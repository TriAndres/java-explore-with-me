DROP TABLE IF EXISTS stats;
DROP TABLE IF EXISTS applications;

CREATE TABLE IF NOT EXISTS applications (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  app_name VARCHAR(32) NOT NULL,
  CONSTRAINT uq_app_name UNIQUE (app_name)
);

CREATE TABLE IF NOT EXISTS stats (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  app_id BIGINT,
  uri VARCHAR(32) NOT NULL,
  ip VARCHAR(32) NOT NULL,
  request_time TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  CONSTRAINT fk_stats_app FOREIGN KEY (app_id) REFERENCES applications (id)
);